'use strict';

var _gulp = require('gulp');

var _gulp2 = _interopRequireDefault(_gulp);

var _gulpSize = require('gulp-size');

var _gulpSize2 = _interopRequireDefault(_gulpSize);

var _swgGulpRev = require('swg-gulp-rev');

var _swgGulpRev2 = _interopRequireDefault(_swgGulpRev);

var _util = require('../util.js');

var _util2 = _interopRequireDefault(_util);

var _config = require('../config.js');

var _config2 = _interopRequireDefault(_config);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/************************************ 编译img ************************************/


// 自定义
_gulp2.default.task('task_img', function () {
  console.log('>>>>>>>>>>>>>>> \u56FE\u7247\u6587\u4EF6\u5F00\u59CB\u7F16\u8BD1\u3002' + _util2.default.getNow());

  return _gulp2.default.src(_config2.default.path.img)

  // 显示img文件体积
  .pipe((0, _gulpSize2.default)({ showFiles: true }))

  // 收集img文件的MD5值
  .pipe((0, _swgGulpRev2.default)())

  // 输出img文件
  .pipe(_gulp2.default.dest(_config2.default.path.static))

  // 输出css文件与MD5值匹配关系的文件
  .pipe(_swgGulpRev2.default.manifest('rev-md5/img.json')).pipe(_gulp2.default.dest(_config2.default.path.temp));
}); // 第三方